!function(o,t,a){"use strict";var s;s={cache:{},options:{source:function(t,e){var i=this.element.attr("id");i in s.cache||(s.cache[i]={});var n=t.term;if(s.cache[i].hasOwnProperty(n))e(s.cache[i][n]);else{var a=o.extend({success:function(t){s.cache[i][n]=t.suggestions,e(t.suggestions)},data:{q:n}},s.ajax);o.ajax(this.element.attr("data-autocomplete-path"),a)}},focus:function(){return!1},search:function(t){return!s.options.isComposing},select:function(t,e){var i=o(t.target).closest("form,fieldset,tr");if(!e.item.path)throw"Missing path param."+JSON.stringify(e.item);if(o('input[name="href_dirty_check"]',i).val(e.item.path),(e.item.entity_type_id||e.item.entity_uuid||e.item.substitution_id)&&(!e.item.entity_type_id||!e.item.entity_uuid||!e.item.substitution_id))throw"Missing path param."+JSON.stringify(e.item);if(o('input[name="attributes[href]"], input[name$="[attributes][href]"]',i).val(e.item.path),o('input[name="attributes[data-entity-type]"], input[name$="[attributes][data-entity-type]"]',i).val(e.item.entity_type_id),o('input[name="attributes[data-entity-uuid]"], input[name$="[attributes][data-entity-uuid]"]',i).val(e.item.entity_uuid),o('input[name="attributes[data-entity-substitution]"], input[name$="[attributes][data-entity-substitution]"]',i).val(e.item.substitution_id),e.item.label){var n=o(t.target).closest(".form-item").siblings(".form-type-textfield").find(".linkit-widget-title");0<n.length&&(n.val()&&!n.hasClass("link-widget-title--auto")||(n.val(e.item.label),n.addClass("link-widget-title--auto")))}return t.target.value=e.item.value,!1},renderItem:function(t,e){var i=o("<li>").addClass("linkit-result-line"),n=o("<div>").addClass("linkit-result-line-wrapper");return n.append(o("<span>").html(e.label).addClass("linkit-result-line--title")),e.hasOwnProperty("description")&&n.append(o("<span>").html(e.description).addClass("linkit-result-line--description")),i.append(n).appendTo(t)},renderMenu:function(i,t){var n=this.element.autocomplete("instance"),e=a.groupBy(t,function(t){return t.hasOwnProperty("group")?t.group:""});o.each(e,function(t,e){t.length&&i.append('<li class="linkit-result-line--group ui-menu-divider">'+t+"</li>"),o.each(e,function(t,e){n._renderItemData(i,e)})})},minLength:1,isComposing:!(t.behaviors.exoLinkLinkit={attach:function(t){var e=o(t).find("input.exo-link-linkit").once("linkit-autocomplete");e.length&&(o.widget("ui.autocomplete",o.ui.autocomplete,{_create:function(){this._super(),this.widget().menu("option","items","> :not(.linkit-result-line--group)")},_renderMenu:s.options.renderMenu,_renderItem:s.options.renderItem}),e.autocomplete(s.options),e.click(function(){var t=o(this);t.autocomplete("search",t.val())}),e.each(function(){var i=o(this);i.autocomplete("widget").addClass("linkit-ui-autocomplete"),i.closest(".form-item").siblings(".form-type-textfield").find(".linkit-widget-title").each(function(){var t=o(this),e=i.val();e&&e===t.val()&&t.addClass("link-widget-title--auto")}).change(function(){o(this).removeClass("link-widget-title--auto")})}),e.on("compositionstart.autocomplete",function(){s.options.isComposing=!0}),e.on("compositionend.autocomplete",function(){s.options.isComposing=!1}))},detach:function(t,e,i){"unload"===i&&o(t).find("input.form-linkit-autocomplete").removeOnce("linkit-autocomplete").autocomplete("destroy")}})},ajax:{dataType:"json"}}}(jQuery,Drupal,_);